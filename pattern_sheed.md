コーチとして、個人やチームや組織にTDDを広めていくコツをまとめているもの（未完）

# 基本原則
* 安心感・信頼関係
* フィードバック
* 対話
* 自分と環境はハッキングできる


# TDDエバンジェリスト(仮)

## 状況

## 解きたい問題

## フォース

## 解
したがって、チームや組織でTDDエバンジェリストとして振る舞ってくれる人材を見つけよう。

## 結果状況
コーチが重点的に指導すべき人材が明らかになります。

# 期待を伝える

# インタビュー

## 状況
TDDを広めるコーチが関わるプロダクトが決まりました。TDDエバンジェリストも決まりました。が、コーチは、プロダクトの現状やチーム状況はよくわかりません。見知らぬ人も多いです。

## 解きたい問題
コーチは、プロダクトやチームの状況を的確に把握したです。また見知らぬメンバーが多く関係づくりをしたいです。

## フォース
現状を把握するために、プロジェクト概要を聞くであったり、現状のコードを把握するために、[静的解析ツール診断]や[コードリーディング]などがあります。これらでも現状を把握することができます。が、概要を代表者の一人から聞くだけでは、プロダクトに関わる個々の人が感じている（TDDと関連がありそうな）困りごとや新しい取り組みに対する期待や不安を把握することはできません。

## 解
したがって、インタビュースクリプトを作成し、[インタビュー]を実施しましょう。異なるロールごとに普段の仕事の進め方や、既にうまくやっていることや、困っていることを把握しましょう。TDD導入の新しい取り組み対する期待する結果や不安を把握しましょう。最後にQAの時間を用意して、できる範囲で疑問を解消しましょう。インタビュー結果は、メモに記録し、後で見直しましょう。

## 結果状況
はじめにコーチに声をかけてくれた人とは異なる見解を獲得できます。異なるロールや人々の異なる目線で、プロダクトやチームの現状を把握できます。そのプロダクトやチームや組織にとって、具体的にTDDを取り組むべき背景や理由、期待結果や障害が把握できます。TDDを広めていく作戦に役立つ情報が得られます。

インタビューの結果、支援の期間内で解くには難しい課題を発見してしまう場合もあります。新しい取り組みに対する反対者、無関心者に出会う可能性もあります。どの順番で巻き込んでいくかは、注意が必要です。


## 代替案
インタビューは、個別に時間を取って話すことができ、個別の困りごとや新しい取り組みの不安ごとなどを把握や関係づくりには適していますが、これだけでは不十分です。プロジェクト概要やリスクや体制などの概要を把握する場合は、[インセプションデッキ]相当の内容確認が適しています。関係づくりに特化するのであれば、[一緒に食事][自己紹介][期待を伝え合うワーク]も代表的な関係づくりの方法の１つです。コードベースの現状把握であれば、[コードリーディング]や[静的解析ツール診断]が適しています。

## 参考
* 　Fearless Change


## メモ
現状把握と関係づくりが混ざってしまった。
えいやーで書いたので内容が荒い。

# 参与観察
こちかららはパッシブに作業を観察して、時折やっている「理由」を確認ることで、現状把握する。


# いっしょに食事


# ペアで開発する

## 結果状況
一人で解くには難しい問題の実装が２人の対話を通じて解けるようになります。対話を通じて複数の解決案の中から妥当な設計の選択・コーディングができます。コードレビューよりも頻繁なフィードバックが可能となり、遅すぎるコードレビューによる手戻り手遅れを防止できます。ペア同士で、ターミナルやエディタやバージョン管理ツールの使い方やTDDやリファクタリングのステップの仕方や普段の開発の行動様式・思考様式を明らかにすることで、刺激し合い学習と成長の場となります。

同一のプログラマー同士だけでなく異なるロール同士（例えばテスト専門、デザイナー、PO、アーキテクト）のペアで開発すると更に異なる目ん玉の数が増えて、抜け漏れの防止や新しい座視（PO目線、デザイナー目線、テスト専門家目線、プログラマ目線、ユーザ候補目線...）による学びが可能となります。

候補者二人の思考が会話で顕在化し、それに対してコーチがフィードバックすることも可能です。

また、これが重要なのですが密なコミュニケーションによる信頼関係の構築の場としてペアで開発することが役立ちます。普段どんなところことを考えながら開発しているのかなどをお互いに深く知り合うことができます。ペアのローテーションを組めば、チーム規模で新しい信頼関係の構築するのに役立ちます。嬉しい結果が得られるテスト・設計のあり方や技術的負債の防止や返済の方策についてチームで議論できる土台となるでしょう。

解く問題が簡単で、後でコードレビューでも手戻りが発生しにくい内容であれば、作業は非効率です。一人で黙々と作業するのが好きな人は、このアプローチを好みません。ペアで開発することで、相手へいらだちを体感する場合があります。２人の間で何を善しとするかの判断基準の大きな相違から、エディタ論争、コーディングスタイル論争、設計論争、技術的負債のあり方の論争に発展し、議論が収束しない場合があります。２人で作業するの第一印象から、作業が非効率であると第三者から非難されることがあります。


## 参考
* 組織パターン
* XPE

## メモ
一般的なペアプロの話なのか、テストを書く文化やTDDを広めていくコンテキストに絞った話なのかが焦点がぶれた。

# ミニ・ライブコーディング

##



# 自動化・TDD導入ゴールの擦り合わせ

# コードリーディング

# 静的解析ツール診断


# テスト／リファクタリング対象の優先順位付け

# ステップバイステップ

# 仕様化テスト

# ユーザマニュアル読み

# 練習、練習、練習

# ホワイトボードスケッチ

# 結合部、絞り込み点、割り込み点の発見

# コードを読む

# 本棚

# 学びの記録(YWTと気分の日誌)とフィードバック

# 学びの共有とフィードバック

# ふりかえり

# 朝会

# 学習イテレーションのテーマ

# イテレーション計画

# 個人の学習目標

# 課題図書

# スリーアミーゴサミット

# 技術的負債の返済計画

# プログラミングに適したディスプレイとキーボードと椅子

# リファクタリング可能エリア

# コードの不吉ない匂い診断と修復

# テストの不吉ない匂い診断と修復

# 試行リファクタリング

## 状況
混乱したコードがある。テストはない。

## 解きたい問題
ほつれを解きほぐし、理解を素早く積極的に対象のコードの理解を深めたい。

## フォース
[テスト／リファクタリング対象の優先順位付け]、[ステップバイステップ]でちょっとづつ、[仕様化テスト]を書き、[リファクタリング可能エリア]を
カバレッジツールで確認し[リファクタリング]するを繰り返すが、[レガシコード改善／技術的負債の返済]の基本です。

が、混乱したコードを目の前にして、もっと素早く、コードが何をしているのか理解したい、本来の目指すべきリーダブルコードがどのようなものかを知りたい場合があります。このとき、前述のステップバイステップでは時間がかかってしまいます。単なるコードリーディングや、既存コードから図解を行っても、
すでにコードが混乱しており理解はなかなか進まないでしょう。一部には実行されない不要なコードも混ざっており理解の邪魔となるでしょう。

## 解
したがって、[試行ファクタリング]をしよう。コードの学習理解だけを目的として、[試行リファクタリング]しながらコードリーディングしよう。
テストの記述は現状の動きや期待する振る舞いの理解を目的のみの最小限にとどめておこう。
容赦なくリファクタ、本来あるべきであった[リーダブルコード]の形を模索する行為を通じて対象コードの理解を深めよう。
対象コードが十分理解ができたら、修正内容はきれいさっぱり捨てよう。必ず捨てよう。
実施する際は、[ペアで開発する]や複数人でプロジェクターに移しながら[ミニ・ライブコーディング]を交えて、
現状の理解や理想のコードの形や設計について語り合おう。[ホワイトボード設計]や[設計原則]を活用しながら議論すると理解はさらに深ります。

## 結果状況
ステップバイステップのゆっくりとしたアプローチや、単にリーディングや逆スケッチに比べ、素早く積極的にコードへの理解を深めることができます。
後からの発見と学習の結果、理想的な設計がどのようなものであったかをコードをベースに話すことができます。
(TODO:もうちょっと詳しくメリットをアピールしたい。)

ただし、通常のレガシーコード改善はもっと[持続可能なペース]で行われるべきものです。このアプローチは危ないショートカット作業です。
試行リファクタリングでたどりついた理想のコードに、通常のレガシーコード改善（技術的負債の返済）のステップで到達できるとは限りません。
また、試行リファクタリングを通常のリファクタリングやレガシーコード改善と誤解してしまって、コミットししまうと、
既存の期待する振る舞いを破壊してしまい、TDDやリファクタリングについての悪評を生み出す結果を生み出すでしょう。

## 代替案
急がば回れ。急いては事を仕損じる。通常のレガシーコード改善でもいずれは対象コードを理解することは可能です。しかもちゃんと動きます。
既存コードに一時的に何をしているかをコメントで装飾するにとどめ、理解を深める方法もあります。
（装飾コメントをした後、レガシーコード改善の活動の中で消していく）
[仕様化テスト]を使って、内部コードは一旦置いといて、外部から現状の振る舞いをテスト記述を重ねることで理解を深める方法もあります。
[CRCカード]を使ったコラボレーションの再設計や[影響スケッチ]を使って影響範囲を調べることでも対象コードへの理解は可能です。


## メモ
誤解による悪評や、本来の持続可能なペースできれいにしていくレガシーコード改善を考えると、
「試行リファクタリング」にリファクタリングという名前が入っているのは、微妙なのかもね。


## 活動の名前付け
学習と成長を意図したふりかえり方法の一種。
活動の名前、活動の期待結果（副作用）、（解きたい課題）を整理する。


## 優先順x伝えたらるかマトリックス
学習と成長を意図したふりかえり方法の一種

## 理想のエバンジェリスト像
学習と成長を意図したふりかえり方法の一種
